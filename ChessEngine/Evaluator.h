#pragma once

#include "State.h"

class Evaluator {
    static constexpr double MAXIMUM_EVALUATION = 123;
    static constexpr double pawnPieceTable[8][8] = { {0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5},
                                                     {1, 1, 1, 1, 1, 1, 1, 1},
                                                     {0.6, 0.6, 0.7, 0.8, 0.8, 0.7, 0.6, 0.6},
                                                     {0.55, 0.55, 0.6, 0.75, 0.75, 0.6, 0.55, 0.55},
                                                     {0.5, 0.5, 0.5, 0.7, 0.7, 0.5, 0.5, 0.5},
                                                     {0.55, 0.45, 0.4, 0.5, 0.5, 0.4, 0.45, 0.55},
                                                     {0.55, 0.6, 0.6, 0.3, 0.3, 0.6, 0.6, 0.55},
                                                     {0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5} },
        knightPieceTable[8][8] = { {0, 0.1, 0.2, 0.2, 0.2, 0.2, 0.1, 0},
                                 {0.1, 0.3, 0.5, 0.5, 0.5, 0.5, 0.3, 0.1},
                                 {0.2, 0.5, 0.6, 0.65, 0.65, 0.6, 0.5, 0.2},
                                 {0.2, 0.55, 0.65, 0.7, 0.7, 0.65, 0.55, 0.2},
                                 {0.2, 0.5, 0.65, 0.7, 0.7, 0.65, 0.5, 0.2},
                                 {0.2, 0.55, 0.6, 0.65, 0.65, 0.6, 0.55, 0.2},
                                 {0.1, 0.3, 0.5, 0.55, 0.55, 0.5, 0.3, 0.1},
                                 {0, 0.1, 0.2, 0.2, 0.2, 0.2, 0.1, 0} },
        bishopPieceTable[8][8] = { {0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.3},
                                 {0.4, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.4},
                                 {0.4, 0.5, 0.55, 0.6, 0.6, 0.55, 0.5, 0.4},
                                 {0.4, 0.55, 0.65, 0.6, 0.6, 0.65, 0.55, 0.4},
                                 {0.4, 0.5, 0.6, 0.6, 0.6, 0.6, 0.5, 0.4},
                                 {0.4, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.4},
                                 {0.4, 0.55, 0.5, 0.5, 0.5, 0.5, 0.55, 0.4},
                                 {0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.3} },
        rookPieceTable[8][8] = { {0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5},
                                 {0.55, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.55},
                                 {0.45, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45},
                                 {0.45, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45},
                                 {0.45, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45},
                                 {0.45, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45},
                                 {0.45, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.45},
                                 {0.5, 0.5, 0.5, 0.55, 0.55, 0.5, 0.5, 0.5} },
        queenPieceTable[8][8] =  { {0.3, 0.4, 0.4, 0.45, 0.45, 0.4, 0.4, 0.3},
                                 {0.4, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.4},
                                 {0.4, 0.5, 0.55, 0.55, 0.55, 0.55, 0.5, 0.4},
                                 {0.45, 0.5, 0.55, 0.55, 0.55, 0.55, 0.5, 0.45},
                                 {0.5, 0.5, 0.55, 0.55, 0.55, 0.55, 0.5, 0.45},
                                 {0.4, 0.55, 0.55, 0.55, 0.55, 0.55, 0.5, 0.4},
                                 {0.4, 0.5, 0.55, 0.5, 0.5, 0.5, 0.5, 0.4},
                                 {0.3, 0.4, 0.4, 0.45, 0.45, 0.4, 0.4, 0.3} },
        kingMiddlegamePieceTable[8][8] = { {0.2, 0.1, 0.1, 0, 0, 0.1, 0.1, 0.2},
                                 {0.2, 0.1, 0.1, 0, 0, 0.1, 0.1, 0.2},
                                 {0.2, 0.1, 0.1, 0, 0, 0.1, 0.1, 0.2},
                                 {0.2, 0.1, 0.1, 0, 0, 0.1, 0.1, 0.2},
                                 {0.3, 0.2, 0.2, 0.1, 0.1, 0.2, 0.2, 0.3},
                                 {0.4, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4},
                                 {0.7, 0.7, 0.5, 0.5, 0.5, 0.5, 0.7, 0.7},
                                 {0.7, 0.8, 0.6, 0.5, 0.5, 0.6, 0.8, 0.7} },
        kingEndgamePieceTable[8][8] = { {0, 0.1, 0.2, 0.3, 0.3, 0.2, 0.1, 0},
                                 {0.2, 0.3, 0.4, 0.5, 0.5, 0.4, 0.3, 0.2},
                                 {0.2, 0.4, 0.7, 0.8, 0.8, 0.7, 0.4, 0.2},
                                 {0.2, 0.4, 0.8, 0.9, 0.9, 0.8, 0.4, 0.2},
                                 {0.2, 0.4, 0.8, 0.9, 0.9, 0.8, 0.4, 0.2},
                                 {0.2, 0.4, 0.7, 0.8, 0.8, 0.7, 0.4, 0.2},
                                 {0.2, 0.2, 0.5, 0.5, 0.5, 0.5, 0.2, 0.2},
                                 {0, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0} };
                            
    static bool isEndgame(State& state);
public:
    static double getEvaluation(State& state);
    static double getMaximumEvaluation();
    static int getPawnEquivalent(char piece);
    static double getWeightedPawnEquivalent(State& state, int i, int j);
};
